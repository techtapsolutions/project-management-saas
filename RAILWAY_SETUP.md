# üöÇ Railway Deployment Guide

## üéØ **Quick Railway Setup (10 minutes)**

### **Step 1: Push to GitHub**
```bash
cd project-management-saas
git init
git add .
git commit -m "Ready for Railway deployment"

# Create GitHub repo and push
git remote add origin https://github.com/yourusername/project-management-saas.git
git push -u origin main
```

### **Step 2: Create Railway Project**

1. **Go to**: [railway.app](https://railway.app)
2. **Sign up** with GitHub account
3. **New Project** ‚Üí **Deploy from GitHub repo**
4. **Select** your `project-management-saas` repository
5. **Add PostgreSQL Database**: Click "Add Service" ‚Üí "Database" ‚Üí "PostgreSQL"

### **Step 3: Configure Services**

Railway will create two services automatically:
- **web** (Next.js frontend)
- **api** (Express.js backend)

**Important**: Railway uses the `railway.toml` configuration we've provided!

### **Step 4: Set Environment Variables**

**For API Service:**
1. Go to Railway Dashboard ‚Üí Your Project ‚Üí **api** service ‚Üí Variables
2. Add these environment variables:

```bash
# JWT Secrets (generate with commands below)
JWT_SECRET=your-generated-jwt-secret-here
JWT_REFRESH_SECRET=your-generated-refresh-secret-here
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# CORS (Railway will auto-populate service URLs)
ALLOWED_ORIGINS=${{web.url}}

# Optional: Email configuration
EMAIL_FROM=noreply@yourapp.com
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# Security
BCRYPT_ROUNDS=12
SESSION_SECRET=your-session-secret-here
```

**For Web Service:**
1. Go to Railway Dashboard ‚Üí Your Project ‚Üí **web** service ‚Üí Variables
2. Add these environment variables:

```bash
# API Configuration (Railway auto-populates)
NEXT_PUBLIC_API_URL=${{api.url}}

# App Configuration
NEXT_PUBLIC_APP_NAME=ProjectMgmt
NEXT_PUBLIC_APP_URL=${{web.url}}

# Feature Flags
NEXT_PUBLIC_ENABLE_ANALYTICS=false
NEXT_PUBLIC_ENABLE_DEBUG=false
```

**Generate JWT Secrets:**
```bash
# Run these commands in your terminal
node -e "console.log('JWT_SECRET=' + require('crypto').randomBytes(32).toString('hex'))"
node -e "console.log('JWT_REFRESH_SECRET=' + require('crypto').randomBytes(32).toString('hex'))"
node -e "console.log('SESSION_SECRET=' + require('crypto').randomBytes(32).toString('hex'))"
```

### **Step 5: Database Schema Setup**

**Option A: Railway CLI (Recommended)**
```bash
# Install Railway CLI
npm install -g @railway/cli

# Login and connect to your project
railway login
railway link

# Navigate to database package and run migration
cd packages/database
railway run npx prisma db push
```

**Option B: Manual Setup**
1. In Railway Dashboard ‚Üí **api** service ‚Üí Variables
2. Copy the DATABASE_URL value
3. Run locally:
```bash
export DATABASE_URL="your_railway_database_url"
cd packages/database
npx prisma db push
```

### **Step 6: Deploy & Access Your App**

After setting up environment variables, Railway will automatically build and deploy both services.

**Your app URLs:**
- **Frontend**: `https://web-production-xxxx.up.railway.app`
- **Backend**: `https://api-production-xxxx.up.railway.app`

**First time setup:**
1. Wait for both services to deploy (check status in Railway dashboard)
2. Visit your frontend URL
3. Register first user (becomes admin automatically)
4. Create your organization
5. Start managing projects!

**If deployment fails:**
- Check the build logs in Railway dashboard
- Verify all environment variables are set
- Ensure database schema was applied

---

## üîß **Railway Configuration**

Railway automatically handles:
- ‚úÖ **PostgreSQL Database** (with backups)
- ‚úÖ **Environment Variables** (DATABASE_URL auto-set)
- ‚úÖ **SSL Certificates** (HTTPS enabled)
- ‚úÖ **Custom Domains** (if you have one)
- ‚úÖ **Auto-scaling** (handles traffic spikes)
- ‚úÖ **Monitoring** (logs and metrics)

---

## üìä **What You Get**

### **Included in $5/month:**
- PostgreSQL database with backups
- Unlimited bandwidth
- Auto-scaling web services
- SSL certificates
- Custom domain support
- 24/7 monitoring
- Automatic deployments from GitHub

### **Free $5 Credit:**
Your first month is essentially free with the $5 credit!

---

## üîç **Troubleshooting**

### **Build Issues:**
```bash
# Check build logs in Railway dashboard
railway logs --service web
railway logs --service api
```

### **Database Connection:**
```bash
# Test database connection
railway run npx prisma db push
```

### **Environment Variables:**
Make sure these are set in Railway:
- `JWT_SECRET` (32+ characters)
- `JWT_REFRESH_SECRET` (32+ characters)
- `DATABASE_URL` (auto-generated by Railway)

### **Common Fixes:**
1. **Build fails**: Check package.json scripts
2. **Database errors**: Verify DATABASE_URL is set
3. **Authentication issues**: Verify JWT secrets are set
4. **CORS errors**: Check API URL in frontend env vars

---

## üöÄ **Post-Deployment**

### **Domain Setup (Optional):**
1. Railway Dashboard ‚Üí Settings ‚Üí Domains
2. Add your custom domain
3. Update DNS records as shown

### **Monitoring:**
- Railway Dashboard ‚Üí Metrics tab
- View logs, CPU usage, memory
- Set up alerts for issues

### **Scaling:**
Railway auto-scales, but you can:
- Set resource limits in Settings
- Monitor usage in Metrics
- Upgrade plan if needed

---

## üí∞ **Cost Management**

### **Stay within $5/month:**
- Small teams (< 10 users): Usually stays under $5
- Monitor usage in Railway dashboard
- Optimize database queries for efficiency

### **If you exceed $5:**
- Railway charges per resource usage
- Database storage and compute time
- Typical small team: $5-15/month

---

## üéØ **Success Checklist**

- [ ] Code pushed to GitHub
- [ ] Railway project created and deployed
- [ ] JWT secrets added to environment variables
- [ ] Database schema pushed with Prisma
- [ ] Frontend and API both accessible
- [ ] First user registered and organization created
- [ ] Custom domain configured (optional)

**Your project management SaaS is now live and ready for real use!**